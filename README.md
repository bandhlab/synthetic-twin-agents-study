# Study: The Potential of Synthetic Twin Agents for Personalized Behavioural Interventions

Evidence from a Proof-of-Concept Study Using Personality-Tailored Advertisements

## Overview

This repository contains the analysis code and data for a study investigating the potential of synthetic twin agents for personalized behavioural interventions. The study uses personality-tailored advertisements as a proof-of-concept application.

The study employs the **[edsl](https://github.com/expectedparrot/edsl)** package for administering surveys to synthetic twin participants, enabling controlled experimental designs with AI-generated participants that mirror human behavioral patterns.

## Setup Instructions

### Prerequisites

- [conda](https://docs.conda.io/en/latest/miniconda.html) or [miniconda](https://docs.conda.io/en/latest/miniconda.html) installed on your system

### Environment Setup

1. Clone this repository:
   ```bash
   git clone git@github.com:bandhlabs/personalized-beh-sci-interventions-study.git
   cd personalized-beh-sci-interventions-study
   ```

2. Create and activate the conda environment:
   ```bash
   conda env create -f environment.yml
   conda activate synthetic-twin-agents-env
   ```

3. Set up environment variables:
   Create a `.env` file in the root directory and add your API keys:
   ```bash
   touch .env
   ```
   
   Add the following to your `.env` file:
   ```
   OPENAI_API_KEY=your_openai_api_key_here
   GOOGLE_API_KEY=your_google_api_key_here
   EXPECTED_PARROT_API_KEY=your_expected_parrot_api_key_here
   ```
   
   **Note**: These API keys are required for generating synthetic twin participants using the edsl package for survey administration.

## Data Description

The analysis uses the following datasets located in the `data/` directory:

- `prolific_participants_dataset.csv`: Human participant (Prolific) data
- `filtered_participants_dataset.csv`: Human participants who passed quality checks (see human-participants-analysis.ipynb for details on filtering criteria)
- `synthetic_participants_gpt.csv`: Synthetic twin participants generated using GPT-4o
- `synthetic_participants_gemini.csv`: Synthetic twin participants generated using Gemini-1.5 Flash

## Running the Analysis

### 1. Human Participants Analysis

Navigate to the human participants analysis:
```bash
cd analysis/human-participants
jupyter notebook human-participants-analysis.ipynb
```

This notebook analyzes the behavior and responses of human participants in the study.

### 2. Synthetic Participants Analysis

Navigate to the synthetic participants analysis:
```bash
cd analysis/synthetic-participants
```

Run the analysis for different LLM models:

**For GPT-based synthetic participants:**
```bash
jupyter notebook analysis_gpt.ipynb
```

**For Gemini-based synthetic participants:**
```bash
jupyter notebook analysis_gemini.ipynb
```

These notebooks analyze the behavior and responses of synthetic participants generated by different language models.

### 3. Synthetic-Human Alignment Analysis

Navigate to the alignment analysis:
```bash
cd analysis/synth-human-alignment
jupyter notebook fishers_z-test.ipynb
```

This notebook performs Fisher's Z-test to compare the alignment between synthetic and human participants.

## Troubleshooting

If you encounter issues with the conda environment:

1. **Environment creation fails**: Try updating conda first:
   ```bash
   conda update conda
   conda env create -f environment.yml
   ```

2. **Package conflicts**: Remove the existing environment and recreate:
   ```bash
   conda env remove -n synthetic-twin-agents-env
   conda env create -f environment.yml
   ```

3. **Jupyter notebook issues**: Ensure the environment is activated and install ipykernel:
   ```bash
   conda activate synthetic-twin-agents-env
   python -m ipykernel install --user --name synthetic-twin-agents-env --display-name "Synthetic Twin Agents"
   ```

## Citation

If you use this code or data in your research, please cite the original paper (citation details to be added).

## License

MIT License

Copyright (c) 2025 Biases & Heuristics Labs

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
